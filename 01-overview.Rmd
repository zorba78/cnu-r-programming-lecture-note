\mainmatter

```{r chunk-setup, echo=FALSE, message=FALSE}
knitr::opts_chunk$set(size="footnotesize",
                      comment = NA,
                      highlight = TRUE)
def.chunk.hook  <- knitr::knit_hooks$get("chunk")
knitr::knit_hooks$set(chunk = function(x, options) {
  x <- def.chunk.hook(x, options)
  ifelse(options$size != "normalsize", paste0("\\", options$size,"\n\n", x, "\n\n \\normalsize"), x)
})
# options(width = 85)
```


# (PART) Get Started {-}

# Introduction {#intro-chap}

**1. R프로그램**

   - 데이터 분석을 위한 자료 전처리, 통계 및 시각화를 지원하는 컴퓨터 언어 및 환경
   - 1980년 AT&T 벨 연구소의 John Chambers가 개발한 S 언어를 기반으로 1995년 뉴질랜드 Auckland 대학의 통계학과 교수 Robert Gentleman과 Ross Ihaka 가 개발
   - [GNU](https://en.wikipedia.org/wiki/GNU_Project) 기반의 오픈 소스
   - 통계학, 전산학, 생물학, 의학 등 거의 모든 학문분야에서 분석도구로 활용되고 있고, 최근 data science 분야에서 널리 활용


**2. R 언어의 특징**

   - **무료 소프트웨어**
   - [CRAN (Comprehensive R Archive Network)](http://cran.r-project.org/web/view)에서 배포
   - 특정 vendor가 아닌 전 세계 연구자들이 개발한 알고리즘 및 최신 함수 활용 가능(packaging system)
   - 범용적으로 사용되는 거의 대부분의 운영체제(Windows, Mac, Linux)에서 작동 가능
   - 방대한 개발 및 사용 생태계 형성 
   - 강력한 그래픽 기능

```{block2, type='rmdtip'}
**유용한 웹 사이트**: R과 관련한 거의 모든 문제는 Googling (구글을 이용한 검색)을 통해 해결 가능(검색주제 + "in R" or "in R software")하고 많은 해답들이 아래 열거한 웹 페이지에 게시되어 있음. 

- R 프로그래밍에 대한 Q&A: [Stack Overflow](https://stackoverflow.com)
- R 관련 웹 문서 모음: [Rpubs](https://rpubs.com/)
- R package에 대한 raw source code 제공: [Github](https://github.com)
- R을 이용한 통계 분석: [Statistical tools for high-throughput data analysis (STHDA)](http://www.sthda.com/english/)

```


## R 설치하기 {#installation}

R 다운로드 사이트: https://www.r-project.org 또는 https://cran.r-project.org

1. 웹 브라우저(i.e. Explore, Chrome, Firefox 등)의 주소 입력창에 https://www.r-project.org

2. 좌측 R Logo 하단 Download 아래 CRAN 클릭

```{r fig.align='center', echo=FALSE, fig.show='hold', out.width='90%'}
options(knitr.graphics.auto_pdf = TRUE)
knitr::include_graphics('figures/Rorg-main-add.png', dpi = NA)
```

<br/>

3. 클릭 후 연결한 페이지를 스크롤 후 Korea 아래 링크^[해당 링크들은 접속 시점에 따라 변경될 수 있음] 클릭 


```{r fig.align='center', echo=FALSE, fig.show='hold', out.width='90%'}
knitr::include_graphics('figures/CRAN-korea-01.png', dpi = NA)
```

<br/>

4. 클릭 후 세 가지 운영체제(Linux, Mac OS X, Windowns)에 따른 R 버전 선택 가능^[본 노트는 Windows 버전 설치만 다룸]


```{r fig.align='center', echo=FALSE, fig.show='hold', out.width='90%'}
knitr::include_graphics('figures/Rinstall-01.png', dpi = NA)
```

<br/>

5. **Downloads R for Windows** 링크 클릭하면 다음과 같은 화면으로 이동

```{r fig.align='center', echo=FALSE, fig.show='hold', out.width='90%'}
knitr::include_graphics('figures/Rinstall-02.png', dpi = NA)
```

<br/>

```{block2, type='rmdtip'}
다음 하위폴더에 대한 간략 설멍

- **`base`**: R 실행 프로그램
- **`contrib`**: R package의 바이너리 파일
- **`Rtools`**: R package 개발 및 배포를 위한 프로그램

```

<br/>

6. 위 화면에서 **base** 링크 클릭 후 아래 화면에서 **Downloads R 3.x.x for Windows** 를 클릭 후 설치 파일을 임의의 디렉토리에 저장 및 실행

```{r fig.align='center', echo=FALSE, fig.show='hold', out.width='90%'}
knitr::include_graphics('figures/Rinstall-03.png', dpi = NA)
```

<br/>


7. 다운로드한 파일을 실행하면 아래와 같은 대화창이 나타남
    - 한국어 선택 $\rightarrow$ 환영 화면에서 [다음(N)>] 클릭

```{r fig.align='center', echo=FALSE, fig.show='hold', out.width='90%'}
knitr::include_graphics('figures/R-install-F01.png', dpi = NA)
```

<br/>

8. GNU 라이센스에 대한 설명 및 동의 여부([다음(N)>]) 클릭

```{r fig.align='center', echo=FALSE, fig.show='hold', out.width='90%'}
knitr::include_graphics('figures/R-install-F02.png', dpi = NA)
```

<br/>

9. 설치 디렉토리 설정 및 구성요소 설지 여부
    - 원하는 디렉토리 설정(예: `C:\R\R-3.x.x`)
    - 기본 프로그램("Core Files"), 32 또는 64 bit 용 설치 파일, R console 한글 번역 모두 체크 뒤 [다음(N)>] 클릭

```{r fig.align='center', echo=FALSE, fig.show='hold', out.width='90%'}
knitr::include_graphics('figures/R-install-F03.png', dpi = NA)
```

```{r fig.align='center', echo=FALSE, fig.show='hold', out.width='90%'}
knitr::include_graphics('figures/R-install-F04.png', dpi = NA)
```

<br/>

10. R 스타트업 옵션 지정
   - 기본값("No" check-button)으로도 설치 진행 가능
   - 본 문서에서는 스타트업 옵션 변경으로 진행

```{r fig.align='center', echo=FALSE, fig.show='hold', out.width='90%'}
knitr::include_graphics('figures/R-install-F05.png', dpi = NA)
```

<br/>

11. 화면표시방식(디스플레이 모드) 설정 변경
   - MDI: 한 윈도우 내에서 script 편집창, 출력, 도움말 창 사용
   - SDI: 다중 창에서 각각 script 편집창, 출력, 도움말 등을 독립적으로 열기

```{r fig.align='center', echo=FALSE, fig.show='hold', out.width='90%'}
knitr::include_graphics('figures/R-install-F06.png', dpi = NA)
```

<br/>

12. 도움말 형식에서 HTML 도움말 기반 선택

```{r fig.align='center', echo=FALSE, fig.show='hold', out.width='90%'}
knitr::include_graphics('figures/R-install-F07.png', dpi = NA)
```

<br/>

13. 시작메뉴 폴더 선택
   - "바로가기"를 생성할 시작 메뉴 폴더 지정 후 [다음(N)>] 클릭 후 설치 진행
   - 하단 "시작메뉴 폴더 만들지 않음" 체크박스 표시 시 시작메뉴에 "바로가기" 아이콘이 생성되지 않음(실행에 전혀 지장 없음)

```{r fig.align='center', echo=FALSE, fig.show='hold', out.width='90%'}
knitr::include_graphics('figures/R-install-F08.png', dpi = NA)
```

<br/>

14. 추가 옵션 지정: 바탕화면 아이콘 생성 등 추가적 작업 옵션 체크 후 [다음(N)>] 클릭 $\rightarrow$ 설치 진행
   - 설치된 R 버전 정보 레지스트리 저장 여부 
   - `.Rdata` 확장자를 R 실행파일과 자동 연계

```{r fig.align='center', echo=FALSE, fig.show='hold', out.width='90%'}
knitr::include_graphics('figures/R-install-F09.png', dpi = NA)
```

<br/>

15. 설치 완료 후 바탕화면의 R 아이콘을 더블클릭하면 Rgui가 실행

```{r r-console, fig.align='center', echo=FALSE, fig.show='hold', out.width='100%', fig.cap="Windows에서 R 실행화면(콘솔 창, SDI 모드)", ref.label='r-console'}
knitr::include_graphics('figures/Rgui.png', dpi = NA)
```

## R 시작 및 작동 체크{#r-check}

```{block2, type='rmdimportant', size="normalsize"}
**실습**: 설치된 R을 실행 후 보이는 R 콘솔(consle) 창에서 명령어를 실행하고 결과 확인
```

Figure \@ref(fig:r-console) 에서 `>` 기호는 R의 명령 프롬프트(prompt) 임

1. 현재 R session 정보(R 설치 버전, locale, 로딩 packages) 출력

```{r check-00, echo=TRUE, comment=NA}
# R의 설치 버전 및 현재 설정된 locale(언어, 시간대) 및 로딩된 R package 정보 출력
sessionInfo() 
```


2. 문자열 출력

```{r check-01, echo=TRUE, comment=NA}
#문자열 출력
print("Hello R") #문자열
```

> `#` 기호는 주석의 시작을 의미하고 실제로 실행되지 않음 같은 행에서 `#` 뒤 내용의 코드 역시 실행되지 않음

3. `a` 라는 변수에 숫자 9, `b`라는 변수에 숫자 7를 할당 후 출력

```{r check-02, echo=TRUE, comment=NA}
# 수치형 값(scalar)을 변수에 할당(assign)
# 여러 명령어를 한줄에 입력할 때에는 세미콜론(;)으로 구분
a = 9; b = 7
a
b
```

4. 변수 `a`와 `b`의 사칙연산

```{r check-03, echo=TRUE, comment=NA}
a+b; a-b; a*b; a/b
```

5. R 그래픽 맛보기: 정규분포로부터 난수 100개 생성 후 생성된 데이터에 대한 히스토그램 작성

```{r check-04, fig.align='center', fig.show='hold', echo=TRUE, fig.cap="정규분포 100개의 히스토그램"}
# 난수 생성 시 값은 매번 달라지기 때문에 seed를 주어 일정값이 생성되도록 고정
# "="과 "<-"는 모두 동일한 기능을 가진 할당 연산자임
#평균이 0 이고 분산이 1인 정규분포에서 난수 100개 생성
set.seed(12345) # random seed 지정
x <- rnorm(100) # 난수 생성
hist(x) # 히스토그램
```

```{block2, type='rmdtip'}
R 명령어 또는 전체 프로그램 소스 실행 시 매우 빈번히 오류가 나타나는데, 이를 해결할 수 있는 가장 좋은 방법은 앞에서 언급한 Google을 이용한 검색 또는 R 설치 시 자체적으로 내장되어 있는 도움말을 참고하는 것이 가장 효율적임. 
```


```{r tab-help, echo=FALSE, message=FALSE}
require(tidyverse)
require(rmarkdown)
require(knitr)
require(kableExtra)

`도움말 보기 명령어` <- c("`help` 또는 `?`", 
                  "`help.search` 또는 `??`", 
                  "`example`", 
                  "`vignette`")
`설명` <- c("도움말 시스템 호출", 
            "주어진 문자열을 포함한 문서 검색",
            "topic의 도움말 페이지에 있는 examples section 실행", 
            "topic의 pdf 또는 html 레퍼런스 메뉴얼 불러오기")
`사용법` <- c("`help(함수명)`", 
           "`help.search(pattern)`", 
           "`example(함수명)`", 
           "`vignette(패키지명 또는 패턴)`")
tab <- data.frame(`도움말 보기 명령어`, 
                  `설명`, 
                  `사용법`, 
                  check.names = F)
options(kableExtra.html.bsTable = T)
knitr::opts_knit$set(kable.force.latex = FALSE)
kable(tab,
      align = "lll",
      escape = FALSE, 
      booktabs = T, caption = "R help 관련 명령어 리스트") %>%
  kable_styling(bootstrap_options = c("condensed", "striped"),
                position = "center", 
                font_size = 10, 
                latex_options = c("striped", "HOLD_position")) %>% 
  column_spec(2, width = "5cm")
```

```{block2, type='rmdtip'}
**Vignette** 의 활용

- `vignette()`에서 제공하는 문서는 데이터를 기반으로 사용하고자 하는 패키지의 실제 활용 예시를 작성한 문서이기 때문에 초보자들이 R 패키지 활용에 대한 접근성을 높혀줌.
- `browseVignettes()` 명령어를 통해 vignette을 제공하는 R 패키지 및 해당 vignette 문서 확인 가능 

```

## R script 편집기 사용{#rconsle-script}

```{block2, type='rmdimportant', size="normalsize"}
**실습**: R 설치 후 Rgui 에서 제공하는 편집기(R editor)에 명령어를 입력하고 실행

```

설치된 R을 실행 후 상단 pull-down 메뉴에서 [**File**] $\rightarrow$ [**새 스크립트**]를 선택하면 아래 그림과 같이 편집창(R 인스톨 시 SDI 옵션 기준)이 나타남

```{r r-console-edit, fig.align='center', echo=FALSE, fig.show='hold', out.width='100%'}
knitr::include_graphics('figures/r-console-edit.png', dpi = NA)
```

편집기 창에 다음 명령어 입력

```{r check-edit, echo=TRUE, eval=FALSE, comment=NA, tidy=TRUE}
# R에 내장된 cars 데이터셋 불러오기
# cars dataset에 포함된 변수들의 기초통계량 출력
# 2차원 산점도 
data(cars)
help(cars) # cars 데이터셋에 대한 설명 help 창에 출력
head(cars) # cars 데이터셋 처음 6개 행 데이터 출력
summary(cars) # cars 데이터셋 요약
plot(cars) # 변수가 2개인 경우 산점도 출력
```

- 편집창에서 한 줄을 실행시키려면 명령어가 입력된 줄에서 **[Ctrl]** + **[R]** 입력
- 편집창에 입력한 모든 명령어를 실행시키려면 모든 줄을 선택(마우스 또는 [Shift] + $\downarrow$)


```{r check-edit-out, echo=FALSE, comment=NA, fig.cap="cars 데이터셋의 speed와 dist 간 2차원 산점도: speed는 자동차 속도(mph)이고 dist는 해당 속도에서 브레이크를 밟았을 때 멈출 때 까지 걸린 거리(ft)를 나타냄."}
# R에 내장된 cars 데이터셋 불러오기
# cars dataset에 포함된 변수들의 기초통계량 출력
# 2차원 산점도 
data(cars)
# help(cars)
head(cars)
summary(cars) 
plot(cars) 
```

- R은 명령어를 입력하고 실행결과를 확인하는 대화형(interpreter) 방식
- 콘솔창에서 $\uparrow$/$\downarrow$를 누르면 이전/이후 실행 명령 기록 확인 가능
- 여러 줄 이상 R 명령어라든가 반복적, 장기간 작업을 수행해야 할 경우 R 명령어로 구성된 스크립트 작성 후 일괄 실행하는 것이 일반적
- 여러 다중 명령 코딩 시 콘솔창에 직접 입력하는 것은 비효율적이므로 스크립트 에디터를 사용
- 위 예시처럼 R 에디터 사용할 수 있으나 가독성 및 코딩 효율이 떨어짐
- 과거 많이 사용됐던 R 에디터: [WinEdt](http://www.winedt.com), [Tinn-R](https://sourceforge.net/projects/tinn-r/), [Vim](http://www.vim.org/scripts/script.php?script_id=2628)
- 현재 가장 범용적 R 에디터: **Rstudio**

## RStudio{#r-studio}

- [RStudio](https://rstudio.com/): R 통합 분석/개발 환경(integrated development environment, IDE)으로 현재 가장 대중적으로 사용되고 있는 R 사용 환경
- 명령 곤솔 외 파일 편집, 데이터 객체, 명령 기록(.history), 그래프 등에 쉽게 접근 가능
- RStudio 독자적인 개발 환경 제공: Rmarkdown, Rnotebook, Shiny Web Application 등 다양한 R 환경을 제공
- 버전관리(git, subversion)를 통해 project 관리 가능
- **무료** 및 유료 소프트웨어 제공

### RStudio 설치하기{#rstudio-install}

1. 웹 브라우저를 통해 https://rstudio.com 접속 후 상단 [DOWNLOAD](https://rstudio.com/products/rstudio/download/) 링크 클릭

```{r fig.align='center', echo=FALSE, fig.show='hold', out.width='80%'}
knitr::include_graphics('figures/rstudio-homepage.png', dpi = NA)
```

2. Desktop 또는 Server 버전 중 택일

   - 서버용 설치를 위해서는 Server 클릭 $\rightarrow$ 소규모 자료 분석용으로는 불필요
   - 여기서는 **Desktop** 버전 선택 후 다음 링크로 이동
  
```{r fig.align='center', echo=FALSE, fig.show='hold', out.width='70%'}
knitr::include_graphics('figures/rstudio-download.png', dpi = NA)
```

3. 운영체제에 맞는 Rstudio installer 다운로드(여기서는 Windows 버전 다운로드)

```{r fig.align='center', echo=FALSE, fig.show='hold', out.width='60%'}
knitr::include_graphics('figures/r-studio-download-02.png', dpi = NA)
```

4. RStudio installer 다운로드 시 파일이 저장된 폴더에서 보통 `RStudio-xx.xx.xxx.exe` 형식의 파일명 확인
   - 더블 클릭 후 실행
   - **[다음>]** 몇 번 클릭 후 설치 종료

```{r fig.align='center', echo=FALSE, fig.show='hold', out.widtht='60%'}
knitr::include_graphics('figures/Rstudio-installer.png', dpi = NA)
```

5. 바탕화면 혹은 시작 프로그램에 새로 설치된 RStudio 아이콘 클릭 후 아래와 같은 프로그램 창이 나타나면 설치 성공

```{r fig.align='center', echo=FALSE, fig.show='hold', out.width='80%'}
knitr::include_graphics('figures/Rstudio-init.png', dpi = NA)
```

### RStudio IDE 화면 구성{#rstudio-component}

RStudio는 아래 그림과 같이 4개 창으로 구성^[각 창의 위치는 세팅 구성에 따라 달라질 수 있음. 창 구성 방법은 RStudio 환경 옵션 설정에서 설명함.]

```{r rstudio-windows, fig.align='center', echo=FALSE, fig.show='hold', out.width='90%', fig.cap="RStudio 화면구성: 우하단 그림은 http://r-statistics.co/Top50-Ggplot2-Visualizations-MasterList-R-Code.html 에서 발췌", ref.label='rstudio-windows'}
knitr::include_graphics('figures/Rstudio-cap1.png', dpi = NA)

```

**1. 콘솔(console)**

- R 명령어 실행공간(RGui, 정확하게는 R 설치 디렉토리에서  "~/R/R.x.x/bin/x64/Rterm.exe" 가 구동되고 있는 공간)
- R script 또는 콘솔 창에서 작성한 명령어(프로그램) 실행 및 그 결과 출력
- 경고, 에러/로그 등의 메세지 확인

```{r rstudio-console, fig.align='center', echo=FALSE, fig.show="hold", out.width='80%', fig.cap="RStudio 콘솔창에서 명령어 실행 후 출력결과 화면", ref.label='rstudio-console'}
knitr::include_graphics('figures/rstudio-console.png', dpi = NA)
```


**2. 스크립트(script)** (Figure \@ref(fig:rstudio-new-script))

- R 명령어 입력 공간으로 일괄처리(batch processing) 가능
- 새로운 스크립트 창 열기
   - 아래 그림과 같이 pull-down 메뉴 좌측 상단 아이콘 클릭 후 [R script] 선택 
   - `[File]` $\rightarrow$ `[New File]` $\rightarrow$ `[R Script]` 선택
   - 단축 키: `[Ctrl] + [Shift] + [N]`
- 일괄 명령어 처리를 위한 RStudio 제공 단축 키
   - `[Ctrl] + [Enter]`: 선택한 블럭 내 명령어 실행
   - `[Alt] + [Enter]`: 선택 없이 커서가 위치한 라인의 명령어 실행
- R 스크립트 이외 R Markdown, R Notebook, Shiny web application 등 새 문서의 목적에 따라 다양한 종류의 소스 파일 생성 가능
- 저장된 R 스크립트 파일은 `파일명.R`로 저장됨
- 파일 실행 방법
   - 실행하고자 하는 파일을 읽은 후(`[File]` $\rightarrow$ `[Open File]` + 파일명 선택 또는 `파일명.R` 더블 클릭) 입력된 모든 라인을 선택한 뒤 `[Ctrl] + [Enter]`
   - 파일 읽은 후 `[Ctrl] + [Shift] + [S]` (현재 열려있는 `*.R` 파일에 대해) 또는 `[Ctrl] + [Shift] + [Enter]`

```{r rstudio-new-script, fig.align='center', echo=FALSE, fig.show="hold", out.width='80%', fig.cap="RStudio 스크립트 새로 열기", ref.label='rstudio-new-script'}
knitr::include_graphics('figures/rstudio-open-new-script.png', dpi = NA)
```


```{block2, type="rmdtip"}
RStudio는 코딩 및 소스 작성의 효율성을 위해 여러 가지 단축 키를 제공하고 있음. 단축키는 아래 그림과 같이 pull down 메뉴 `[Tools]` 또는 `[Help]`에서 `[Keyboard shortcut help]` 또는 `[Alt] + [Shift] + [K]` 단축키를 통해 확인할 수 있음. 또는 Rstudio cheatsheet에서 단축키에 대한 정보를 제공하는데 pull down 메뉴 `[Help]` $\rightarrow$ `[Cheatsheets]` $\rightarrow$ `[RStudio IDE Cheat Sheet]`을 선택하면 각 아이콘 및 메뉴 기능에 대한 개괄적 설명 확인 가능함. 

```

**3. 환경/명령기록(Environment/History)** (Figure \@ref(fig:rstudio-env))

- **Environment**: 현재 R 작업환경에 저장되어 있는 객체의 특성 및 값 등을 요약 제시
   - 좌측 아래 화살표 버튼 클릭: 해당 객체의 상세 정보 확인
   - 우측 사각형 버튼 또는 객체(데이터셋명) 클릭: 객체가 데이터셋(데이터프레임)인 경우 스프레드 시트 형태로 데이터셋 확인

```{r rstudio-env, fig.align='center', echo=FALSE, fig.show='hold', out.width='90%', fig.cap="RStudio Environment 창 객체 상세 정보 및 스프레드 시트 출력 결과", ref.label='rstudio-env'}
knitr::include_graphics('figures/rstudio-environment.png', dpi = NA)

```

- History: R 콘솔에서 실행된 명령어(스크립트)들의 이력 확인

```{r rstudio-history, fig.align='center', echo=FALSE, fig.show='hold', out.width='90%'}
knitr::include_graphics('figures/Rstudio-historywin.png', dpi = NA)

```

**4. File/Plots/Packages/Help/Viewer**

- File: Windows 파일 탐색기와 유사한 기능 제공
   - 파일 및 폴더 생성, 삭제/파일 및 폴더명 수정, 그리고 작업경로 설정
      
```{r rstudio-file, fig.align='center', echo=FALSE, fig.show='hold', out.width='80%'}
knitr::include_graphics('figures/Rstudio-file.png', dpi = NA)

```

- **Plots**: 생성한 그래프 출력
   - 작업 중 생성한 그래프 이력이 Plots 창에 저장: $\leftarrow$ 이전, $\rightarrow$ 최근
   - **`Zoom`**: 클릭 시 해당 그래프의 팝업창이 생성되고 팝업창의 크기 조정을 통해 그래프의 축소/확대 가능
   - **`Export`**: 선택한 그래프를 이미지 파일(`.png`, `.jpeg`, `.pdf` 등)로 저장할 수 있고, 클립보드로 복사 가능

```{r rstudio-plotwin, fig.align='center', echo=FALSE, fig.show='hold', out.width='80%'}
knitr::include_graphics('figures/RStudio-plotwin.png', dpi = NA)

```

- **Packages**: 현재 컴퓨터에 설치된 R 패키지 목록 출력
   - 신규 설치 및 업데이트 가능

```{r rstudio-packagewin, fig.align='center', echo=FALSE, fig.show='hold', out.width='80%'}
knitr::include_graphics('figures/RStudio-packagewin.png', dpi = NA)

```

- **Help**: `help(topic)` 입력 시 도움말 창이 출력되는 공간

```{r help, eval=FALSE}
help(lm)
```

```{r rstudio-helpwin, fig.align='center', echo=FALSE, fig.show='hold', out.width='80%'}
knitr::include_graphics('figures/RStudio-helpwin.png', dpi = NA)

```

### RStudio 환경 설정{#rstudio-glob-options}

Pull-down 메뉴에서 `[Tools]` $\rightarrow$ `[Global Options...]`를 선택

```{r rstudio-glob-menu, fig.align='center', echo=FALSE, fig.show="hold", out.width='80%'}
knitr::include_graphics('figures/rstudio-glob-menu.png', dpi = NA)
```


**General**: RStudio 운용 관련 전반적 설정 세팅

```{r rstudio-glob-option, fig.align='center', echo=FALSE, fig.show="hold", out.width='80%'}
knitr::include_graphics('figures/rstudio-glob-option.png', dpi = NA)
```

- **R version**: 만약 컴퓨터에 두 개 이상 다른 R 버전이 설치되어 있는 경우 `[Change]` 클릭 후 설정 변경 가능
- **Default Working directory**: 작업 디렉토리 지정([`Browse`] 클릭 후 임의 폴더 설정 가능)
- **Restore most recently opened project at startup**: RStudio 실행 시 가장 최근에 작업한 프로젝트로 이동
- **Restore previously open source documents at startup**: RStudio 실행 시 현재 프로젝트에서 가장 최근에 작업한 소스코드 문서를 함께 열어줌. 
- **Restore .RData into workspace at startup**: 작업 디렉토리에 존재하는 `.RData` 파일을 RStudio 실행 시 불러옴
- **Save workspace to .RData on exit**: R workspace 자동 저장(`.RData`) 여부
- **Always save history (even when not saving .RData) **: R 실행 명령 history 저장 여부(Always/Never/Ask) 
- **Remove duplicate entries in history**: history 저장 시 중복 명령 제거 여부

**Code: Editing**: 들여쓰기, 자동 줄바꿈 등 코드 편집에 대한 전반적 설정

```{r rstudio-code-option, fig.align='center', echo=FALSE, fig.show="hold", out.width='80%'}
knitr::include_graphics('figures/rstudio-code-edit-option.png', dpi = NA)
```

- **Insert spaces for tab**: `[Tab]` 키를 눌렀을 때 공백(space) 개수 결정(본 강의노트: `Tab width = 4`)
- **Auto-detect code indentation**: 코들 들여쓰기 자동 감지 
- **Insert matching parens/quotes**: 따옴표, 괄호 입력 시 커서를 따옴표/괄호 사이로 자동 이동
- **Auto-indent code after paste**: 코드 복사 시 들여쓰기 일괄 적용
- **Vertically align arguments in auto-indent**: 함수 작성 시 들여쓰기 레벨 유지 여부
- **Soft-wrap R source file**: 스크립트 편집기 너비를 초과하는 경우 R 코드 행을 자동 줄바꿈
- **Continue comment when inserting new line**: 주석 표시를 다음 행에도 자동 적용 여부
- **Surround selection on text insertino**: 스크립트 상 text 선택 후 자동 따옴표 및 괄호 적용 여부
- **Focus console after executing from source**: 스크립트 실행 후 커서 위치를 콘솔로 이동 여부

**Code: Display**: 스크립트(소스) 에디터 표시 화면 설정

```{r rstudio-code-display, fig.align='center', echo=FALSE, fig.show="hold", out.width='80%'}
knitr::include_graphics('figures/rstudio-code-display.png', dpi = NA)
```

- **Highlight selected word**: 스크립트 내 text 선택 시 동일한 text에 대해 배경강조 효과 여부
- **Highlight selected line**: 선택된 행에 대해 배경 강조효과 여부
- **Show line numbers**: 행 번호 보여주기 여부
- **Show margin**: 소스 에디터 오른 쪽에 지정한 margin column 보여주기 여부
- **Show whitespace characters**: 에디터에 공백 표시 여부
- **Show indent guides**: 현재 들여쓰기 열 표시 여부
- **Blinking cursor**: 커서 깜박임 여부 
- **Show syntax highlighting in console output**: 콘솔 입력 라인에 R 구문 강조 표시 적용 여부
- **Allow scroll past end of document**: 문서 마지막 행 이후 스크롤 허용 여부
- **Allow drag and drop of text**: 선택한 복수의 행으로 구성된 text에 대해 마우스 drag 허용
- **Highlight R function calls**: R 내장 및 패키지 제공함수에 대해 강조 여부

**Code: Saving**: 스크립트(소스) 에디터 저장 설정

```{r rstudio-code-saving, fig.align='center', echo=FALSE, fig.show="hold", out.width='80%'}
knitr::include_graphics('figures/rstudio-code-saving.png', dpi = NA)
```

- **Ensure that source file end with newline**: 
- **String trailing horizontal whitespace when saving**: 
- **Restore last cursor position when opening file**: 
- **Default text encoding**: 

**Appearance**: RStudio 전체 폰트, 폰트 크기, theme 설정

```{r rstudio-appearance, fig.align='center', echo=FALSE, fig.show="hold", out.width='80%'}
knitr::include_graphics('figures/rstudio-appearance.png', dpi = NA)
```

**Pane Layout**: RStudio 구성 패널들의 위치 및 항목 등을 수정/추가/삭제(4개 페널은 항시 유지)

```{r rstudio-pane-layout, fig.align='center', echo=FALSE, fig.show="hold", out.width='80%'}
knitr::include_graphics('figures/rstudio-pane-layout.png', dpi = NA)
```

## R 주요 패키지 설치{#r-package-installation}

1. RStudio 메뉴 `[Tools]` $\rightarrow$ `[Install packages]` 클릭 후 생성된 팝업 창에서 설치하고자 하는 패키지 입력 후 설치
2. RStudio `Packages` 창에서 `[Install]` 버튼 누르고 설치(위와 동일)
3. R 콘솔 또는 스크립트 창에서 `install.packages()` 함수를 사용해서 패키지 설치

### R 패키기 Path 지정{#r-package-path}

### R 패키지 불러오기{#r-package-load}

1. `library()` vs. `require()`
    - `library()`: 불러오고자 하는 패키지가 시스템에 존재하지 않는 경우 에러 메세지 출력(에러 이후 명령어들이 실행되지 않음)
    - `require()`: 패키지가 시스템에 존재하지 않는 경우 경고 메세지 출력(경고 이후 명령어 정상적으로 실행)

2. 다중 패키지 동시에 불러오기
    - RStudio `Packages` 창에서 설치하고자 하는 패키지 선택 버튼 클릭하면 R workspace로 해당 패키지 로드 가능
    - 스크립트 이용
    
```{r multiple-package, echo = T, eval = F}
pkgName <- c("MASS", "tidyverse", "ggthemes", "readxl", 
             "kableExtra", "ztable", "car", "lsmeans", 
             "rmarkdown", "knitr")
# 'lapply()': 벡터, 리스트 또는 표현식에 함수를 적용하여 그 결과를 리스트로 반환
lapply(pkgName, require, character.only = T) 
```


## RStudio 프로젝트 생성{#rstudio-create-project}

### RStudio 프로젝트{#rstudio-project}

1. 프로젝트 
    - 물리적 측면: 최종 산출물(문서)를 생성하기 위한 데이터, 사진, 그림 등을 모아 놓은 폴더
    - 논리적 측면: R 세션 및 작업의 버전 관리

2. 프로젝트의 필요성
    - 자료의 정합성 보장
    - 다양한 확장자를 갖는 한 폴더 내에 뒤섞일 때 곤란해 질 수 있음 
    - 실제 분석 및 그래프 생성에 사용한 정확한 프로그램 또는 코드 연결이 어려움
  
3. 좋은 프로젝트 구성을 위한 방법
    - 원자료(raw data)의 보호: 가급적 자료를 읽기 전용(read only) 형태로 다루기
    - 데이터 정제(data wrangling 또는 data munging)를 위한 스크립트와 정제 자료를 보관하는 읽기 전용 데이터 디렉토리 생성
    - 작성한 스크립트로 생성한 모든 산출물(테이블, 그래프 등)을 "일회용품"처럼 처리 $\rightarrow$ 스크립트로 재현 가능
    - 한 프로젝트 내 각기 다른 분석마다 다른 하위 디렉토리에 출력결과 저장하는 것이 유용

3. RStudio 새로운 프로젝트 생성
    - RStudio의 가장 강력하고 유용한 기능
    - 새로운 프로젝트 생성: RStudio 메뉴에서 `[File]` $\rightarrow$ `[New Project]` 선택하면 아래와 같은 팝업 메뉴 생성


## R Markdown (맛보기){#r-markdown-get-start}




`r if (knitr::is_html_output()) '
# References {-}
'`

